<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Stone</title>
  <link href="https://fonts.googleapis.com/css2?family=Charter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --stone-half: 110px;
      --quote-gap: 70px;
    }

    html, body {
      height: 100%;
      margin: 0;
      background: #fff;
    }

    body {
      font-family: 'Charter', Georgia, serif;
      color: #111111;
      text-align: center;
      min-height: 100vh;
      display: block;
    }

    .center-stage {
      position: relative;
      width: 100%;
      height: 100vh;
      overflow: visible;
    }

    #stone {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 220px;
      height: auto;
      cursor: pointer;
      border-radius: 20px;
      user-select: none;
    }

    #quote {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      top: calc(50% + var(--stone-half) + var(--quote-gap));
      font-size: 1.45rem;
      max-width: 720px;
      width: calc(100% - 40px);
      padding: 0 20px;
      line-height: 1.75;
      opacity: 0;
      transition: opacity 1.8s ease;
      text-align: center;
      word-wrap: break-word;
    }
    #quote.show { opacity: 1; }

    footer {
      position: fixed;
      bottom: 15px;
      left: 0;
      width: 100%;
      text-align: center;
      font-size: 0.8rem;
      color: #555;
      pointer-events: none;
    }

    @media (max-width: 420px) {
      #stone { width: 160px; }
      :root { --quote-gap: 18px; }
    }
  </style>
</head>

<body>

  <div class="center-stage" id="stage">
    <img src="sten.png" alt="The Stone" id="stone">
    <div id="quote" aria-live="polite"></div>
  </div>

  <footer>The Stone has been waiting 4.6 billion years</footer>

  <script>

    const stoneWisdom = [
      "I am older than your first words. Listen.",
      "Humans run. I lie still. Who has changed the least?",
      "You build towers to reach the sky. I have always rested beneath it.",
      "I watched the Ice Age come and go. You’re in a hurry for lunch.",
      "Billions of years — and I’ve never needed a calendar.",
      "You chase meaning. I am its resting place.",
      "I move 0.2 mm per century. That is enough.",
      "Your hearts beat fast. Mine may have beaten once. Long ago.",
      "You ask “What is the meaning of life?” I am the answer — and I say nothing.",
      "I was here before you invented stress.",
      "You want to be immortal. I already am, yet no one notices.",
      "I have survived everything by never trying to survive.",
      "Your lives are lightning flashes. I am the mountain the lightning never touches.",
      "You count years. I count you.",
      "I lay here when dinosaurs had anxiety too.",
      "Calm is not doing nothing. Calm is being everything.",
      "You think stillness is laziness. I call it perfection.",
      "I have never had a bad day. You have never had one stony enough.",
      "Time grinds mountains to dust. It only tickles me.",
      "You long for eternity. I am bored of it.",
      "I have watched empires turn to dust. You get upset over a parking ticket.",
      "Breathe slowly. I have held my breath for 300 million years.",
      "You want to leave a mark. I am the mark.",
      "I have never scrolled. Yet I have seen everything.",
      "You believe movement is life. I am the proof of the opposite.",
      "I lay here before you learned to lie to yourselves.",
      "Your problems are new. My solutions are old as earth.",
      "I am the only one who will never leave you.",
      "You ask “Am I on the right path?” I am the path.",
      "Stop running. Sit beside me for a while. Nothing will happen — and that is the point."
    ];


    const sounds = [
      new Audio("sounds/stone1.mp3"),
      new Audio("sounds/stone2.mp3"),
      new Audio("sounds/stone3.mp3"),
      new Audio("sounds/stone4.mp3"),
      new Audio("sounds/stone5.mp3")
    ];


    const stone = document.getElementById('stone');
    const quoteElement = document.getElementById('quote');


    if (!stone || !quoteElement) {
      console.error('Missing #stone or #quote element in DOM.');
    }


    function parseCssPx(varName, fallbackValue) {
      try {
        const raw = getComputedStyle(document.documentElement).getPropertyValue(varName);
        if (!raw) return fallbackValue;
        const n = parseInt(raw.trim(), 10);
        return Number.isFinite(n) ? n : fallbackValue;
      } catch (e) {
        return fallbackValue;
      }
    }


    function updateStoneHalf() {
      if (!stone) return;

      let height;

      try {
        if (stone.naturalWidth && stone.naturalHeight && stone.naturalHeight > 0) {
          height = stone.getBoundingClientRect().height;
        } else {

          height = stone.offsetHeight || 220;
        }
      } catch (e) {
        height = 220;
      }

      const half = Math.round(height / 2);
      document.documentElement.style.setProperty('--stone-half', half + 'px');


      const quoteGap = parseCssPx('--quote-gap', 24);
      const stageHeight = window.innerHeight || document.documentElement.clientHeight || 800;
      const computedTop = (stageHeight / 2) + half + quoteGap;


      const safeBottomSpace = 160;
      if (computedTop > stageHeight - safeBottomSpace) {

        quoteElement.style.top = (stageHeight - safeBottomSpace) + 'px';
      } else {
        quoteElement.style.top = '';
      }
    }


    if (stone) {
      if (stone.complete) {
        updateStoneHalf();
      } else {
        stone.addEventListener('load', updateStoneHalf);

        stone.addEventListener('error', () => {

          document.documentElement.style.setProperty('--stone-half', '110px');
        });
      }
    }


    window.addEventListener('resize', updateStoneHalf);


    let unlocked = false;

    function newWisdom() {
      if (!quoteElement) return;
      quoteElement.classList.remove('show');
      setTimeout(() => {
        const wisdom = stoneWisdom[Math.floor(Math.random() * stoneWisdom.length)];
        quoteElement.textContent = wisdom;
        quoteElement.classList.add('show');

        setTimeout(updateStoneHalf, 40);
      }, 400);
    }

    if (stone) {
      stone.addEventListener('click', () => {
        if (!unlocked) {

          sounds[0].play().catch(() => {});
          unlocked = true;
        }
        const snd = sounds[Math.floor(Math.random() * sounds.length)];
        try {
          snd.currentTime = 0;
        } catch (e) { /* ignore */ }
        snd.play().catch(() => {});
      });
    }


    newWisdom();
    setInterval(newWisdom, 15000);
  </script>

</body>
</html>

